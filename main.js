!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n}var n,r;return n=t,(r=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.disabled=!0,t.classList.add(this._inactiveButtonClass)):(t.disabled=!1,t.classList.remove(this._inactiveButtonClass))}},{key:"_hasInvalidInput",value:function(e){return!e.every((function(e){return!0===e.validity.valid}))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState(e._inputList,e._submitButton)}))}))}},{key:"enableValidation",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._toggleButtonState(e._inputList,e._submitButton)})),this._setEventListeners()}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}document.querySelector(".pic-preview"),document.querySelector(".modal__preview-image"),document.querySelector(".modal__pic-name");var r=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._cardSelector=n,this._handleCardClick=r}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__element").cloneNode(!0)}},{key:"_handleLike",value:function(){this._element.querySelector(".elements__heart").classList.toggle("elements__heart_active")}},{key:"_handleDelete",value:function(){this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".elements__image").addEventListener("click",(function(){e._handleCardClick({link:e._link,title:e._name})})),this._element.querySelector(".elements__heart").addEventListener("click",(function(){e._handleLike()})),this._element.querySelector(".elements__delete").addEventListener("click",(function(t){t.preventDefault(),e._handleDelete(),t.stopPropagation()}))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".elements__title").textContent=this._name,this._element.querySelector(".elements__image").style.backgroundImage="url(".concat(this._link,")"),this._element}}])&&n(t.prototype,r),e}(),o=r;function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}}])&&i(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popupEl=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupEl.classList.add("modal_enabled"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupEl.classList.remove("modal_enabled"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupEl.addEventListener("click",(function(t){t.target.classList.contains("modal__cross")&&e.close(),t.target.classList.contains("modal")&&e.close()}))}}])&&a(t.prototype,n),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=p(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function m(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function l(e,t){var n,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=i.call(this,t))._handleFormSubmit=r,n._popupForm=n._popupEl.querySelector(".form"),n}return t=l,(n=[{key:"_getInputValues",value:function(){var e=this._popupEl.querySelectorAll(".form__input"),t={};return e.forEach((function(e){return t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var e=this;this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()})),f(_(l.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._popupForm.reset(),f(_(l.prototype),"close",this).call(this)}}])&&s(t.prototype,n),l}(u);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function E(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e))._link=t._popupEl.querySelector(".modal__preview-image"),t._title=t._popupEl.querySelector(".modal__pic-name"),t}return t=l,(n=[{key:"open",value:function(e){var t=e.link,n=e.title;this._link.src=t,this._link.alt=n,this._title.textContent=n,b(S(l.prototype),"open",this).call(this)}}])&&v(t.prototype,n),l}(u),C=document.querySelector(".modal_type_edit"),L=document.querySelector(".modal_type_add"),O=document.querySelector(".profile__edit-btn"),q=(document.querySelector("#modal-edit-form"),document.querySelector(".profile__name")),j=document.querySelector(".profile__occupation"),B=document.querySelector(".profile__add-btn"),P=(document.querySelector("#modal-add-form"),document.querySelector(".modal-name-input")),R=document.querySelector("#description-input"),I=C.querySelector(".form"),T=L.querySelector(".form"),x={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"button_inactive",inputErrorClass:"form__error-message_visible",errorClass:"form__error-message"},A=new l({items:[{name:"The Gorge",link:"https://res.cloudinary.com/dhh19fozh/q_auto:good,f_auto,dpr_1.0/w_auto:breakpoints_85_850_10_10:810/jb7production-uploads/2018/07/gorge-amphitheatre-crop-2018-instagram-1200x631.jpg"},{name:"Red Rocks",link:"https://www.mondodr.com/wp-content/uploads/2021/03/Top_Seating-NEW-ROOF-696x522.jpg"},{name:"Hampton Mothership",link:"http://3.bp.blogspot.com/-nH2Re_3nkdc/Ts2fDlzQvoI/AAAAAAAABpk/cHHNTQeDCZ8/s400/hampton.jpg"},{name:"Big Cypress",link:"https://vbwsjdqd1l-flywheel.netdna-ssl.com/wp-content/uploads/2020/02/Big-Cypress-Swamp-Florida-Trail-wading-1536x864.jpg"},{name:"Angels Landing",link:"https://www.americansouthwest.net/utah/photographs1118/zioncyn4.jpg"},{name:"Ascend",link:"http://www.hallstrategies.com/wp-content/uploads/2016/04/ascend-drawing-e1460041647625-1024x625.jpg"}],renderer:function(e){H(e,A)}},".elements"),D=new y({popupEl:"modal_type_edit",handleFormSubmit:function(e){q.textContent=e.name,j.textContent=e.occupation}},".modal_type_edit");D.setEventListeners();var F=new y({popupEl:"modal_type_add",handleFormSubmit:function(e){H({name:e.place,link:e.url},A)}},".modal_type_add");F.setEventListeners();var V=new k(".pic-preview");function H(e,t){var n=new o(e,"#card-template",z).generateCard();t.addItem(n)}function z(e){V.open(e)}V.setEventListeners(),A.renderItems(),O.addEventListener("click",(function(){P.value=q.textContent,R.value=j.textContent,D.open()})),B.addEventListener("click",(function(){F.open()})),new t(x,T).enableValidation(),new t(x,I).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VCxLQUczRCxtQkFFRk8sRUFBYUQsb0JBRWIsSUFBTUksRUFBYSxJQUFJMUIsRUFBZSxnQkFzQnRDLFNBQVNpQixFQUFXakUsRUFBTTJFLEdBQ3hCLElBQU1DLEVBQU8sSUFBSTdFLEVBQUtDLEVBQU0saUJBQWtCRSxHQUFpQjJFLGVBQy9ERixFQUFVRyxRQUFRRixHQVNwQixTQUFTMUUsRUFBZ0JGLEdBQ3ZCMEUsRUFBV0ssS0FBSy9FLEdBakNsQjBFLEVBQVdKLG9CQUVYTixFQUFVZ0IsY0FtQ1YxQixFQUFhOUQsaUJBQWlCLFNBakM5QixXQUNFa0UsRUFBQUEsTUFBdUJILEVBQUFBLFlBQ3ZCSSxFQUFBQSxNQUE2QkgsRUFBQUEsWUFDN0JVLEVBQVVhLFVBK0JadEIsRUFBWWpFLGlCQUFpQixTQXJCN0IsV0FDRStFLEVBQWFRLFVBd0JVLElBQUk5SCxFQUFjNkcsRUFBc0JELEdBQ2hEb0IsbUJBRVMsSUFBSWhJLEVBQWM2RyxFQUFzQkYsR0FDaERxQixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2luaXRpYWxDYXJkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzc1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzc1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnRcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yU3BhbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXG4gICAgZXJyb3JTcGFuLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2VcbiAgICBlcnJvclNwYW4uY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKVxuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JTcGFuID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYClcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcylcbiAgICBlcnJvclNwYW4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKVxuICAgIGVycm9yU3Bhbi50ZXh0Q29udGVudCA9ICcnXG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpXG4gICAgfVxuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgIHJldHVybiAhaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQgPT09IHRydWUpXG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApXG5cbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApXG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0TGlzdCwgdGhpcy5fc3VibWl0QnV0dG9uKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUodGhpcy5faW5wdXRMaXN0LCB0aGlzLl9zdWJtaXRCdXR0b24pXG4gICAgfSlcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yXG4iLCJjb25zdCBwaWNQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBpYy1wcmV2aWV3JylcbmNvbnN0IHByZXZpZXdJbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3ByZXZpZXctaW1hZ2UnKVxuY29uc3QgcHJldmlld05hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19waWMtbmFtZScpXG5cbmNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWVcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrXG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19lbGVtZW50JylcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSlcblxuICAgIHJldHVybiBjYXJkRWxlbWVudFxuICB9XG5cbiAgX2hhbmRsZUxpa2UoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faGVhcnQnKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRzX19oZWFydF9hY3RpdmUnKVxuICB9XG5cbiAgX2hhbmRsZURlbGV0ZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpXG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faW1hZ2UnKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCB0aXRsZTogdGhpcy5fbmFtZSB9KVxuICAgICAgfSlcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2hlYXJ0JylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZSgpXG4gICAgICB9KVxuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fZGVsZXRlJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGUoKVxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICB9KVxuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZVxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICcuZWxlbWVudHNfX2ltYWdlJ1xuICAgICkuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWBcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmRcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2luaXRpYWxBcnJheSA9IGl0ZW1zXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpXG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KVxuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faW5pdGlhbEFycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pXG4gICAgfSlcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3RvcilcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9lbmFibGVkJylcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX2VuYWJsZWQnKVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfX2Nyb3NzJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICB9XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgaGFuZGxlRm9ybVN1Ym1pdCB9LCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3RvcilcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdFxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWwucXVlcnlTZWxlY3RvcignLmZvcm0nKVxuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IF9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpXG4gICAgY29uc3QgX2lucHV0VmFsdWVzID0ge31cbiAgICBfaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiAoX2lucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKVxuICAgIHJldHVybiBfaW5wdXRWYWx1ZXNcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfSlcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKVxuICAgIHN1cGVyLmNsb3NlKClcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3RvcilcbiAgICB0aGlzLl9saW5rID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3ByZXZpZXctaW1hZ2UnKVxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5fcG9wdXBFbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3BpYy1uYW1lJylcbiAgfVxuXG4gIG9wZW4oeyBsaW5rLCB0aXRsZSB9KSB7XG4gICAgdGhpcy5fbGluay5zcmMgPSBsaW5rXG4gICAgdGhpcy5fbGluay5hbHQgPSB0aXRsZVxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gdGl0bGVcbiAgICBzdXBlci5vcGVuKClcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGVkaXRNb2RhbFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF90eXBlX2VkaXQnKVxuZXhwb3J0IGNvbnN0IGFkZE1vZGFsV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX3R5cGVfYWRkJylcbmV4cG9ydCBjb25zdCBtb2RhbEVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idG4nKVxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kYWwtZWRpdC1mb3JtJylcbmV4cG9ydCBjb25zdCB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJylcbmV4cG9ydCBjb25zdCB1c2VyT2NjdXBhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19vY2N1cGF0aW9uJylcbmV4cG9ydCBjb25zdCBhZGRNb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnRuJylcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2RhbC1hZGQtZm9ybScpXG5leHBvcnQgY29uc3QgbW9kYWxOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtbmFtZS1pbnB1dCcpXG5leHBvcnQgY29uc3QgbW9kYWxPY2N1cGF0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVzY3JpcHRpb24taW5wdXQnKVxuZXhwb3J0IGNvbnN0IGVkaXRGb3JtRWwgPSBlZGl0TW9kYWxXaW5kb3cucXVlcnlTZWxlY3RvcignLmZvcm0nKVxuZXhwb3J0IGNvbnN0IGFkZEZvcm1FbCA9IGFkZE1vZGFsV2luZG93LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJylcblxuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnYnV0dG9uX2luYWN0aXZlJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9fZXJyb3ItbWVzc2FnZV92aXNpYmxlJyxcbiAgZXJyb3JDbGFzczogJ2Zvcm1fX2Vycm9yLW1lc3NhZ2UnLFxufVxuIiwiaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcydcbmltcG9ydCBpbml0aWFsQ2FyZHMgZnJvbSAnLi4vdXRpbHMvaW5pdGlhbENhcmRzLmpzJ1xuaW1wb3J0IHtcbiAgYWRkTW9kYWxXaW5kb3csXG4gIG1vZGFsRWRpdEJ0bixcbiAgZWRpdFByb2ZpbGVNb2RhbCxcbiAgdXNlck5hbWUsXG4gIHVzZXJPY2N1cGF0aW9uLFxuICBhZGRNb2RhbEJ0bixcbiAgYWRkQ2FyZEZvcm0sXG4gIG1vZGFsTmFtZUlucHV0LFxuICBtb2RhbE9jY3VwYXRpb25JbnB1dCxcbiAgZm9ybVZhbGlkYXRpb25Db25maWcsXG4gIGVkaXRGb3JtRWwsXG4gIGFkZEZvcm1FbCxcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xuXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICByZW5kZXJDYXJkKGl0ZW0sIGNhcmRzTGlzdClcbiAgICB9LFxuICB9LFxuICAnLmVsZW1lbnRzJ1xuKVxuXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAge1xuICAgIHBvcHVwRWw6ICdtb2RhbF90eXBlX2VkaXQnLFxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dFZhbHVlcykgPT4ge1xuICAgICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlcy5uYW1lXG4gICAgICB1c2VyT2NjdXBhdGlvbi50ZXh0Q29udGVudCA9IGlucHV0VmFsdWVzLm9jY3VwYXRpb25cbiAgICB9LFxuICB9LFxuICAnLm1vZGFsX3R5cGVfZWRpdCdcbilcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpXG5cbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICB7XG4gICAgcG9wdXBFbDogJ21vZGFsX3R5cGVfYWRkJyxcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICAgIGNvbnN0IGFkZFBsYWNlSW5wdXQgPSBpbnB1dFZhbHVlcy5wbGFjZVxuICAgICAgY29uc3QgYWRkVXJsSW5wdXQgPSBpbnB1dFZhbHVlcy51cmxcbiAgICAgIHJlbmRlckNhcmQoeyBuYW1lOiBhZGRQbGFjZUlucHV0LCBsaW5rOiBhZGRVcmxJbnB1dCB9LCBjYXJkc0xpc3QpXG4gICAgfSxcbiAgfSxcbiAgJy5tb2RhbF90eXBlX2FkZCdcbilcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpXG5cbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5waWMtcHJldmlldycpXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKClcblxuY2FyZHNMaXN0LnJlbmRlckl0ZW1zKClcblxuZnVuY3Rpb24gb3BlbkVkaXRNb2RhbCgpIHtcbiAgbW9kYWxOYW1lSW5wdXQudmFsdWUgPSB1c2VyTmFtZS50ZXh0Q29udGVudFxuICBtb2RhbE9jY3VwYXRpb25JbnB1dC52YWx1ZSA9IHVzZXJPY2N1cGF0aW9uLnRleHRDb250ZW50XG4gIGVkaXRQb3B1cC5vcGVuKClcbn1cblxuZnVuY3Rpb24gZWRpdEZvcm1TdWJtaXQoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KClcbiAgdXNlck5hbWUudGV4dENvbnRlbnQgPSBtb2RhbE5hbWVJbnB1dC52YWx1ZVxuICB1c2VyT2NjdXBhdGlvbi50ZXh0Q29udGVudCA9IG1vZGFsT2NjdXBhdGlvbklucHV0LnZhbHVlXG4gIGVkaXRQb3B1cC5jbG9zZSgpXG59XG5cbmZ1bmN0aW9uIG9wZW5BZGRNb2RhbCgpIHtcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKVxufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEsIGNvbnRhaW5lcikge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgJyNjYXJkLXRlbXBsYXRlJywgaGFuZGxlQ2FyZENsaWNrKS5nZW5lcmF0ZUNhcmQoKVxuICBjb250YWluZXIuYWRkSXRlbShjYXJkKVxufVxuXG5mdW5jdGlvbiBhZGRGb3JtU3VibWl0KGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gIG5ld0NhcmRQb3B1cC5faGFuZGxlRm9ybVN1Ym1pdCgpXG4gIG5ld0NhcmRQb3B1cC5jbG9zZSgpXG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhkYXRhKSB7XG4gIGltYWdlUG9wdXAub3BlbihkYXRhKVxufVxuXG4vL0V2ZW50IExpc3RlbmVyc1xubW9kYWxFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkVkaXRNb2RhbClcbmFkZE1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkFkZE1vZGFsKVxuXG4vL3ZhbGlkYXRpb25cblxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBhZGRGb3JtRWwpXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKVxuXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1WYWxpZGF0aW9uQ29uZmlnLCBlZGl0Rm9ybUVsKVxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG4iLCJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAnVGhlIEdvcmdlJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9yZXMuY2xvdWRpbmFyeS5jb20vZGhoMTlmb3poL3FfYXV0bzpnb29kLGZfYXV0byxkcHJfMS4wL3dfYXV0bzpicmVha3BvaW50c184NV84NTBfMTBfMTA6ODEwL2piN3Byb2R1Y3Rpb24tdXBsb2Fkcy8yMDE4LzA3L2dvcmdlLWFtcGhpdGhlYXRyZS1jcm9wLTIwMTgtaW5zdGFncmFtLTEyMDB4NjMxLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmVkIFJvY2tzJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly93d3cubW9uZG9kci5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMjEvMDMvVG9wX1NlYXRpbmctTkVXLVJPT0YtNjk2eDUyMi5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ0hhbXB0b24gTW90aGVyc2hpcCcsXG4gICAgbGluazogJ2h0dHA6Ly8zLmJwLmJsb2dzcG90LmNvbS8tbkgyUmVfM25rZGMvVHMyZkRselF2b0kvQUFBQUFBQUFCcGsvY0hITlRRZURDWjgvczQwMC9oYW1wdG9uLmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnQmlnIEN5cHJlc3MnLFxuICAgIGxpbms6ICdodHRwczovL3Zid3NqZHFkMWwtZmx5d2hlZWwubmV0ZG5hLXNzbC5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMjAvMDIvQmlnLUN5cHJlc3MtU3dhbXAtRmxvcmlkYS1UcmFpbC13YWRpbmctMTUzNng4NjQuanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdBbmdlbHMgTGFuZGluZycsXG4gICAgbGluazogJ2h0dHBzOi8vd3d3LmFtZXJpY2Fuc291dGh3ZXN0Lm5ldC91dGFoL3Bob3RvZ3JhcGhzMTExOC96aW9uY3luNC5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ0FzY2VuZCcsXG4gICAgbGluazogJ2h0dHA6Ly93d3cuaGFsbHN0cmF0ZWdpZXMuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE2LzA0L2FzY2VuZC1kcmF3aW5nLWUxNDYwMDQxNjQ3NjI1LTEwMjR4NjI1LmpwZycsXG4gIH0sXG5dXG5cbmV4cG9ydCBkZWZhdWx0IGluaXRpYWxDYXJkc1xuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJpbnB1dCIsImVycm9yU3BhbiIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJyZW1vdmUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRMaXN0IiwiYnV0dG9uIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiZXZlcnkiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsImRvY3VtZW50IiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsInRvZ2dsZSIsInRpdGxlIiwiX2hhbmRsZUxpa2UiLCJlIiwiX2hhbmRsZURlbGV0ZSIsInN0b3BQcm9wYWdhdGlvbiIsIl9nZXRUZW1wbGF0ZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pbml0aWFsQXJyYXkiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJfcG9wdXBFbCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX2lucHV0VmFsdWVzIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwiX3RpdGxlIiwic3JjIiwiYWx0IiwiZWRpdE1vZGFsV2luZG93IiwiYWRkTW9kYWxXaW5kb3ciLCJtb2RhbEVkaXRCdG4iLCJ1c2VyTmFtZSIsInVzZXJPY2N1cGF0aW9uIiwiYWRkTW9kYWxCdG4iLCJtb2RhbE5hbWVJbnB1dCIsIm1vZGFsT2NjdXBhdGlvbklucHV0IiwiZWRpdEZvcm1FbCIsImFkZEZvcm1FbCIsImZvcm1WYWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiY2FyZHNMaXN0IiwicmVuZGVyQ2FyZCIsImVkaXRQb3B1cCIsInBvcHVwRWwiLCJpbnB1dFZhbHVlcyIsIm9jY3VwYXRpb24iLCJzZXRFdmVudExpc3RlbmVycyIsIm5ld0NhcmRQb3B1cCIsInBsYWNlIiwidXJsIiwiaW1hZ2VQb3B1cCIsImNvbnRhaW5lciIsImNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwib3BlbiIsInJlbmRlckl0ZW1zIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=